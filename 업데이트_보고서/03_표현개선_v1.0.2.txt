================================================================================
                    답변 형식 개선: 표현 최적화
                    RAG 시스템 마이너 업데이트 v1.0.2
================================================================================

수정 날짜: 2026년 1월 26일
수정 버전: v1.0.2
프로젝트: AgentProject (사내 문서 기반 RAG 챗봇)
분류: 표현 최적화 (UI/UX 개선)

================================================================================
[변경 사항 개요]
================================================================================

챗봇 답변에서 "문서에서 확인되지 않음"이라는 표현을 더 자연스럽고
시각적으로 개선된 "문서에서 확인되지 않는 사항"으로 변경하였습니다.

또한 이모지와 섹션 구분을 개선하여 사용자가 더 쉽게 인식할 수 있도록
별첨 형식(작은 글씨)으로 표시하도록 수정했습니다.


================================================================================
[상세 변경 사항]
================================================================================

1. 표현 개선
─────────────────────────────────────────────────────────────────────────────

  변경 전: "문서에서 확인되지 않음"
  변경 후: "문서에서 확인되지 않는 사항"
  
  이유:
  - 더 자연스러운 한국어 표현
  - "사항"이라는 단어로 카테고리화
  - 사용자가 이 섹션이 "부족한 정보"라는 의미를 더 명확히 인식


2. 시각적 개선
─────────────────────────────────────────────────────────────────────────────

  변경 전:
    ## ❓ 문서에서 확인되지 않음
    (내용)

  변경 후:
    ---
    *※ 문서에서 확인되지 않는 사항*
    (내용)
  
  개선점:
  - 물음표 이모지 → 별첨 기호(※) 사용
  - 구분선(---)으로 시각적 분리
  - 마크다운 기울임(*) 적용으로 작은 글씨 효과
  - 주요 섹션이 아니라 부가 정보임을 명확히 표시


3. 프롬프트 규칙 수정
─────────────────────────────────────────────────────────────────────────────

  QA 프롬프트:
    규칙 1: "문서에서 확인되지 않음" → "문서에서 확인되지 않는 사항"
    추가: 마지막에 별첨 형식 안내 추가

  요약 프롬프트:
    규칙 2: "문서에서 확인되지 않음" → "문서에서 확인되지 않는 사항"
    섹션 변경: "## ❓ 문서에서 확인되지 않음" 
              → "---\n*※ 문서에서 확인되지 않는 사항*"


================================================================================
[수정된 파일]
================================================================================

파일: rag_module.py

수정 위치:
  1) 82~115줄: QA 프롬프트 (qa_template)
     - 규칙 1 수정
     - 출력 형식 추가

  2) 124~155줄: 요약 프롬프트 (summary_template)
     - 규칙 2 수정
     - 섹션 형식 변경

수정된 코드 스니펫:

  [변경 1] QA 프롬프트
  ```
  1. <Context>에 근거가 없으면 답을 만들지 말고 "문서에서 확인되지 않는 사항"이라고 명확히 말할 것
  
  ## 확인하면 좋은 추가 정보
  (문서에 존재하는 관련 체크포인트/서류/기한 등, 있으면 2~3개)
  
  ---
  *※ 이 섹션이 비어있을 경우 문서에서 확인되지 않는 사항입니다.*
  ```

  [변경 2] 요약 프롬프트
  ```
  2. 문서에 없는 내용은 "문서에서 확인되지 않는 사항"에 명시할 것
  
  ---
  *※ 문서에서 확인되지 않는 사항*
  (없으면 '없음')
  ```


================================================================================
[사용자 경험 개선]
================================================================================

개선 전:
  ## ❓ 문서에서 확인되지 않음
  연차 중복 신청 시 처리 방법
  
  느낌: "?"가 강조되어 의문형처럼 보임

개선 후:
  ---
  *※ 문서에서 확인되지 않는 사항*
  연차 중복 신청 시 처리 방법
  
  느낌: 부가 정보 섹션처럼 보이며, 작은 글씨로 중요도가 낮음을 표시


================================================================================
[호환성 및 영향도]
================================================================================

✓ 호환성: 완벽 호환
✓ 하위호환성: 유지됨
✓ 성능영향: 없음 (표현만 변경)
✓ 심각도: 낮음 (UI/UX 개선만)

영향받는 대상:
  - 문서에 정보가 없는 질문에 대한 답변 표현
  - 요약 모드에서 미확인 사항 표시


================================================================================
[테스트 방법]
================================================================================

1) 기본 테스트
   ① PDF 문서 업로드
   ② "문서에 없는 내용" 질문 입력 (예: "화성 기지 건설 계획은?")
   ③ 답변에서 "문서에서 확인되지 않는 사항" 섹션 확인
   ④ 별첨 기호(※)와 작은 글씨(기울임)로 표현되는지 확인

2) 요약 모드 테스트
   ① 사이드바에서 "요약" 또는 "정리" 포함 질문 입력
   ② "---" 구분선과 "*※ 문서에서 확인되지 않는 사항*" 확인
   ③ 마크다운 기울임이 제대로 렌더링되는지 확인

3) 시각적 비교
   ① 이전: "## ❓ 문서에서 확인되지 않음"
   ② 현재: "*※ 문서에서 확인되지 않는 사항*"
   ③ 시각적으로 덜 강조되는지 확인


================================================================================
[예상 효과]
================================================================================

사용자 관점:
  ✓ 답변이 더 자연스러워 보임
  ✓ 중요한 정보와 부가 정보의 구분이 명확함
  ✓ 물음표 이모지가 사라져 부정적 인상 감소
  ✓ 별첨 형식으로 정보 계층이 명확함

디자인 관점:
  ✓ 마크다운 기울임으로 시각적 강조 수준 조정
  ✓ 구분선으로 섹션 분리 강화
  ✓ 기호 변경으로 "중요하지 않은 정보" 표현 개선


================================================================================
[향후 개선사항]
================================================================================

1) HTML 지원 시 추가 개선 가능
   - <small> 태그로 실제 작은 글씨 구현
   - 회색 텍스트로 시각적 강조 약화

2) 색상 지정 가능 시
   - 회색(#888888) 텍스트로 부가 정보 표시
   - 배경색 옅게 처리

3) 마크다운 확장 시
   - 각주(footnote) 형식으로 처리
   - 힌트박스 스타일 적용


================================================================================
[변경 이력]
================================================================================

버전: v1.0.2 (2026년 1월 26일)
  - 표현 최적화: "문서에서 확인되지 않음" → "문서에서 확인되지 않는 사항"
  - 시각 개선: 이모지 및 섹션 형식 변경
  - UI/UX 개선: 별첨 형식으로 정보 계층 구분


================================================================================
수정 보고서 작성일: 2026년 1월 26일
작성자: AI Assistant
AgentProject 버전: 1.0.2
================================================================================
보고서 상태: 마이너 업데이트 (표현 개선)
